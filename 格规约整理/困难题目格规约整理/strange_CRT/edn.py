import random  
def gcd(a, b):  
   if a < b:  
     a, b = b, a  
   while b != 0:  
     temp = a % b  
     a = b  
     b = temp  
   return a  
def getpq(n,e,d):  
    p = 1  
    q = 1  
    # while p==1 and q==1:  
    #     # time +=1
    k = d * e - 1  
    g = random.randint ( 0 , n )  
    # time2=0
    while p==1 and q==1 and k % 2 == 0:  
        # time2 +=1
        k //= 2  
        y = pow(g,k,n)  
        if y!=1 and gcd(y-1,n)>1:  
            p = gcd(y-1,n)  
            q = n//p 
        
    # print(f'time{time}')
    return p,q


dq = 1011331184633
dp = 144535940445873870281692103786170340417916153745024141971996764811779357175800873270887773125642487545831358920116961366624170120498752904497413162562281561168639744596348619507245064502580332405605
p = 180285970162380180344064425076999151670367711991135176561379237139345689974579828378854173388420670702791610869869850243343338105556351362017343519170039436051990712378051591453767691999164221818555007677507913
q = 47835012474581767081866183356411058349627432732824414013851067986042682811824952952527817806201422910754529033650445546505389704058324406704964645810453028315854047683999303887623728662694112686455614356841296458061818793850669981283989542101480306037924842275870942334010269887280951210901573888926739367265878079624104869997734723354397043633358931011177234914732224624600163905603623059699020698693103127
d = 2635891132046155086769271946891639958280324403211598927107013946766799000616752110219980232258102938162589987539395101140086721824254761472372502325230181601830893741773951267988307099334642282143395654568592480123356910996326429677168924828364456727708332754099061088619959773194949128574812103717457495533091943737082072764519649543144591550619111763041362239928002934434032262784008265135185886769856258334796472105247487640937393637113214090159702091448416317704293137410520758842407471189641324593876271443440554393934452874087821599518501488170475623952972937753773827905861981063376389352186414116368367981677
e = 3410683673696850282011941194019166084605515359194764928102030822650980248712497061619583388757311315417925105856204743870407617525547625839608381882076537612007917821272180597863614753942601007309393790508991560165237622226678000315932146975432128293079232350847959037790026067119055130782881126764792785107747081613767906266959689878318774140474426758368803442658346082550854223773946458886472777433350108842660199170538089155202709160908951770470635216764387758288648577586615671222089167963958566948951581399304284490197078008616360139824103093089163893219283351852114766590642248815957195927769602325102094343829

n = p*q

for i in range(2**40, 0,-1):
    dq = i
    # dq = 1011331184633
    if(i%100==0):
        print(i)
    p,q=(getpq(n, e, dq))
    if p==0:
        continue
    if(n-p*q)==0:
        print(f'p={p}\nq={q}')
        break
